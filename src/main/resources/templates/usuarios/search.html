<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Pesquisar Usuários</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/css/list.css}">
    <script defer th:src="@{/js/list.js}"></script>
    
</head>
<body class="page">

<div th:replace="fragments/layout :: header('Pesquisar Usuários')"></div>

<main class="wrapper">

    <form method="get" th:action="@{/usuarios/ui/buscar}" class="card form">
        <div class="grid">
            <div class="field">
                <label for="q">Pesquisar por nome ou CPF</label>
                <input id="q" name="q" type="text" th:value="${q}" placeholder="Nome ou CPF">
            </div>
            <div class="field">
                <label>&nbsp;</label>
                <div class="actions">
                    <button class="btn btn--primary" type="submit">Pesquisar</button>
                    <a th:href="@{/usuarios/ui}" class="btn btn--ghost">Voltar</a>
                </div>
            </div>
        </div>
    </form>

    <div th:if="${results != null}">
        <div class="card table-card" th:if="${#lists.size(results) > 0}">
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                    <tr>
                        <th>CPF</th>
                        <th>Nome</th>
                        <th>Data Nasc.</th>
                        <th>CEP</th>
                        <th>Placa</th>
                        <th>Ações</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="u : ${results}">
                        <td th:text="${u.cpf}">CPF</td>
                        <td th:text="${u.nome}">Nome</td>
                        <td th:text="${#dates.format(u.dataNascimento, 'yyyy-MM-dd')}">1990-01-01</td>
                        <td th:text="${u.endereco != null ? u.endereco.cep : ''}">00000000</td>
                        <td>
                            <span th:if="${u.placa != null}" th:text="${u.placa.placa}">ABC1234</span>
                        </td>
                        <td>
                            <a th:href="@{'/usuarios/ui/' + ${u.cpf} + '/editar'}" class="btn btn--ghost btn--xs">Editar</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="empty-state" th:if="${#lists.size(results) == 0}">Nenhum resultado encontrado.</div>
    </div>

</main>

</body>
</html>
